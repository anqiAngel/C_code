# 自定义类型

>自定义类型:结构体、枚举、联合

## 结构体

>结构体是一些值的集合,这些值称为成员变量。结构的每个成员可以时不同类型的变量。是一种复杂的类型。

    // 定义一个书结构 声明一个结构体
    struct Book
    {
        /* data */
        char name[20];
        char id[20];
        int price;
    } book1 = {"红楼梦", "3", 20}, book2 = {"水浒传", "4", 20}; // 声明结构体变量并初始化

    // 匿名结构体 没有结构体标签名字 不完全声明结构体 只能使用一次
    struct
    {
        /* data */
        int id;
        char name[20];
    } s;

    // 匿名结构体指针
    struct
    {
        /* data */
        int id;
        char name[20];
    } *ps;

    // 结构体的引用
    struct A
    {
        /* data */
        int i;
        char c;
    };

    struct B
    {
        /* data */
        char c;
        struct A sa;
        double d;
    };
    // 不可以 必须先有类型再重命名
    typedef struct
    {
        /* data */
        int data;
        Node *next;
    } Node;

    int main()
    {
        /* code */
        // 结构体初始化
        struct Book book3 = {"西游记", "1", 20};
        struct Book book4 = {"三国演义", "2", 20};
        // ps = &s; // 会出现问题 编译器会将他们理解为不同的类型
        return 0;
    }

结构体的自引用 在结构体里包含同类型的指针 结点能够找到同类型的下一个结点

    // 结构体的自引用
    // 链表结点定义
    struct N
    {
        /* data */
        // 数据域
        int i;
        // 死循环不可以
        // struct N sn;
        // 地址域
        struct N *sn;
    };

## 结构体内存大小计算

>结构体内存对齐
>1.结构体的第一个成员,放在结构体在内存中存储位置的0偏移处开始
>2.从第2个成员往后的所有成员,都放在对齐数(成员的大小、默认对齐数二者的较小值)的整数倍的地址处
>3.结构体的总大小是结构体的所有成员的对齐数中最大的那个对齐数的整数倍
>4.VS编译器默认对齐数是8 Linux没有这个概念
>5.如果嵌套了结构体的情况,嵌套的结构体对齐到自己的最大对齐数的整数倍处,结构体的整体大小就是所有最大对齐数(含嵌套结构体的对齐数)的整数倍 