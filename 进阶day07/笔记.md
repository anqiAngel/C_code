# 文件

## 什么是文件

>磁盘上的文件 持久化数据
>程序设计中一般有两种文件:程序文件、数据文件(从文件功能角度来分类)

程序文件:程序文件(后缀为.c),目标文件(windows环境后缀为.obj),可执行文件(windows环境后缀为.exe)
数据文件:文件的内容不一定是程序,而是运行时读写的数据,比如程序运行时需要从中读取数据的文件,或者输出内容的文件
文件名:一个文件要有一个唯一的文件标识,以便用户识别和引用
文件名包含三个部分:文件路径+文件名主干+文件后缀
>例如C:\code\test.c这是一个完整的文件名

为方便起见,文件标识符常被称为文件名

## 文件的操作

>文件指针:在缓冲文件系统中,有一个关键的概念是"文件类型指针",简称"文件指针"。
当程序使用文件时会在内存中开辟一块空间(文件信息区)存储信息 其实是一个结构体变量类型为FILE
未来操作文件其实是对文件信息区操作 使用的它的指针(地址)通过指针来维护

### 文件的打开与关闭

>文件使用之前要打开文件,使用之后要关闭文件
>内存中程序读取/输入文件(硬盘) 内存中程序写入/输出文件(硬盘)

>以写的模式打开文件

    int main()
    {
        /*code*/
        // 打开成功返回指针 否则返回NULL
        FILE*fp = fopen(".\\test.txt","w");
        if (fp == NULL)
        {
            /* code */
            perror("fopen");
        }else
        {
            /* code */
            // 写文件
        }
        // 关闭文件
        fclose(fp);
        fp = NULL;
        return 0;
    }

>以读的模式打开文件

    int main()
    {
        /* code */
        // 打开成功返回指针 否则返回NULL
        FILE* fp = fopen(".\\test.txt","r");
        if (fp == NULL)
        {
            /* code */
            perror("fopen");
        }else
        {
            /* code */
            // 读文件

        }
        // 关闭文件
        fclose(fp);
        fp = NULL;
        return 0;
    }

### 文件得顺序读写和随机读写

>文件的顺序读写 文件的顺序读写有几个函数见下图

![Alt text](%E9%A1%BA%E5%BA%8F%E8%AF%BB%E5%86%99%E5%87%BD%E6%95%B0.jpg)

代码实现

    int main()
    {
        /* code */
        // 从标准输入流里读
        // 1.标准输入流读取字符
        // 2.fget(stdin)获取一个字符输出
        printf("%c\n",fgetc(stdin));
        printf("%c\n",fgetc(stdin));
        printf("%c\n",fgetc(stdin));
        return 0;
    }
---
    int main()
    {
        /* code */
        // 打开成功返回指针 否则返回NULL
        FILE *fp = fopen(".\\test.txt", "r");
        if (fp == NULL)
        {
            /* code */
            perror("fopen");
        }
        else
        {
            /* code */
            // 读文件
            printf("%c\n", fgetc(fp));
            printf("%c\n", fgetc(fp));
            printf("%c\n", fgetc(fp));
            // fgetc(fp)会读取到文件结束 返回-1 EOF
            printf("%d\n", fgetc(fp));
            printf("%d\n", fgetc(fp));
            printf("%d\n", fgetc(fp));
        }
        // 关闭文件
        fclose(fp);
        fp = NULL;
        return 0;
    }
---
    int main()
    {
        /* code */
        // 打开成功返回指针 否则返回NULL
        FILE *fp = fopen(".\\test1.txt", "w");
        if (fp == NULL)
        {
            /* code */
            perror("fopen");
        }
        else
        {
            /* code */
            // 写文件 - 按照行来写 文本写 ASCII码值
            fputs("abcdef", fp);
            // 不换行接着写
            fputs("abcdefg", fp);
            // 换行加\n
            fputs("abc\ndefg", fp);
        }
        // 关闭文件
        fclose(fp);
        fp = NULL;
        return 0;
    }
---
    int main()
    {
        /* code */
        // 打开成功返回指针 否则返回NULL
        FILE *fp = fopen(".\\test1.txt", "r");
        char str[10] = "";
        if (fp == NULL)
        {
            /* code */
            perror("fopen");
        }
        else
        {
            /* code */
            // 读文件 - 按照行来读 读n-1个字符
            fgets(str, 4, fp);
            printf("%s\n", str);
            fgets(str, 4, fp);
            printf("%s\n", str);
        }
        // 关闭文件
        fclose(fp);
        fp = NULL;
        return 0;
    }
